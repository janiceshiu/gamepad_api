<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Gamepad API implementation</title>
    <script type="text/javascript" src="src/gamepad-service.js"></script>
    <script>
      class Consumer extends HTMLIFrameElement {
        constructor() {
          super();
          console.log("created");
          this.innerText = `<h1>Hello Consumer!</h1>`;
        }

        // TODO: disconnect/connect registration as per activation algorithm" or similar
        // possible function signatures could be `onGamepadConnected(gamepad)` and `onGamepadDisconnected(gamepad)`
      }

      customElements.define("gamepad-consumer", Consumer, {
        extends: "iframe"
      });
    </script>
  </head>

  <body>
    <div>
      <iframe is="gamepad-consumer"></iframe>

      <button id="add-gamepad">Add Gamepad</button><br /><br />
      <button id="add-iframe">Add iFrame</button>
    </div>

    <div id="gamepads"></div>

    <div id="iframes"></div>
  </body>
</html>
